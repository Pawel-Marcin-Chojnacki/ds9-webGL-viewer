ArrayBuffer.prototype.hasOwnProperty("slice")||(ArrayBuffer.prototype.slice=function(e,t){void 0==t&&(t=i.length);for(var r=t-e,n=Math.floor(r/Float64Array.BYTES_PER_ELEMENT),a=new ArrayBuffer(t-e),o=new Float64Array(a,0,n),i=new Float64Array(this,e,n),s=0;s<o.length;s++)o[s]=i[s];i=new Uint8Array(this,e+n*Float64Array.BYTES_PER_ELEMENT),o=new Uint8Array(a,n*Float64Array.BYTES_PER_ELEMENT);for(var s=0;s<o.length;s++)o[s]=i[s];return a});var slimfits;!function(e){var t;!function(t){var r=function(){function t(){this.registeredDataReaders=[e.io.datareaders.simpleDataReader,e.io.datareaders.asciiTableDataReader,e.io.datareaders.binaryTableDataReader,e.io.datareaders.randomGroupsDataReader]}return t.prototype.readFits=function(t){for(var r,n=(e.utils.Constants,[]),a=t.byteOffset,o=0,i=t.buffer.byteLength;;)if(r=this.readHdu(t),a+=r.bytesRead,o+=r.bytesRead,t=new Uint8Array(t.buffer,a),n.push(r.hdu),!(i>o)){var s={fits:{hdus:n},bytesRead:o};return s}},t.prototype.readHdu=function(t){{var r,n,a,o,i,s=e.utils.KeywordsManager,u=[],l=!1,f=t.byteOffset,c=0;t.buffer.byteLength}if(a=this.readHeader(t),f+=a.bytesRead,c+=a.bytesRead,t=new Uint8Array(t.buffer,f),i=a.header,o=s.single(i,"NAXIS"),null!=o&&0!==o.value&&(l=!0),l){r=this.readData(t,i),u=r.data;var v=s.single(i,"BITPIX");v.value=r.actualType,f+=r.bytesRead,c+=r.bytesRead,t=new Uint8Array(t.buffer,f)}return n={hdu:{header:i,data:u},bytesRead:c}},t.prototype.readHeader=function(t){var r,n,a,o,i,s,u,l,f=e.utils.Constants,c=e.utils.KeywordsManager,v=!1,y=[],g=t.byteOffset,d=0,h=new Uint8Array(t.buffer,g,f.blockLength),E=String.fromCharCode.apply(null,h);for(g+=f.blockLength,d+=f.blockLength;""!==E;){for(r=0;r<f.maxKeywordsInBlock;){if(i=E.substring(r*f.lineLength,(r+1)*f.lineLength),0===i.indexOf("END     ",0)){v=!0;break}o=void 0,u=void 0,a=void 0,o=i.substring(0,f.keyLength).trim(),"= "===i.substr(f.keyLength,2)?(l=void 0,n=void 0,s=void 0,"/"===i.charAt(31)?(u=i.substr(10,21),l=i.substr(31),s=0):(l=i.substr(10,f.lineLength-10),s=l.lastIndexOf(" /"),u=-1===s?l:l.substring(0,s)),n=c.convertBack(u.trim(),o),-1!==s?(a=l.substr(s+1).trim(),y.push(""!==a?{key:o,value:n,comment:a}:{key:o,value:n,comment:null})):y.push({key:o,value:n,comment:null})):(u=i.substr(f.keyLength,f.lineLength-f.keyLength),y.push({key:o,value:u,comment:null})),r++}if(v)break;h=new Uint8Array(t.buffer,g,f.blockLength),E=String.fromCharCode.apply(null,h),g+=f.blockLength,d+=f.blockLength}return{header:y,bytesRead:d}},t.prototype.readData=function(e,t){for(var r,n=0;n<this.registeredDataReaders.length;){if(r=this.registeredDataReaders[n],r.canReadData(t))return r.readData(e,t);n++}throw console.log("SlimFits was unable to read this file."),{name:"SlimFitsError",message:"SlimFits was unable to read this file."}},t}();t.reader=r}(t=e.io||(e.io={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(e){var t=function(){function e(){this.length=0,this.pattern="A\\d{1,}"}return e.prototype.convert=function(e){return e.length>this.length&&console.log("StringAsciiConverter: Value "+e+" has too many characters"),e.substr(0,length)},e.prototype.convertBack=function(e){return e.trim()},e.prototype.empty=function(e){return[]},e.prototype.fitsFormat=function(){return"A"+this.length},e}();e.StringAsciiConverter=t;var r=function(){function e(){this.length=0,this.pattern="I\\d{1,}"}return e.prototype.convert=function(e){var t=e.toString();return t.length>this.length&&console.log("Int32AsciiConverter: Value "+t+" has to many characters"),t},e.prototype.convertBack=function(e){var t=e.replace(/[\n\r ]/g,"");if(""===t)return 0;var r=parseInt(t);return isNaN(r)&&console.log("Int32AsciiConverter: value '"+t+"' is not a number."),r},e.prototype.empty=function(e){return new Int32Array(e)},e}();e.Int32AsciiConverter=r;var n=function(){function e(){this.length=0,this.digits=0,this.pattern="F\\d{1,}\\.?\\d{0,}"}return e.prototype.convert=function(e){var t=e.toString();return t.length>length&&console.log("Float32AsciiConverter: Value "+t+" has to many characters"),t},e.prototype.convertBack=function(e){var t=e.replace(/[\n\r ]/g,"");if(""===t)return 0;var r=parseFloat(t);return isNaN(r)&&console.log("Float32AsciiConverter: value '"+t+"' is not a number."),r},e.prototype.empty=function(e){return new Float32Array(e)},e}();e.Float32AsciiConverter=n;var a=function(){function e(){this.length=0,this.digits=0,this.pattern="(D|E)\\d{1,}\\.?\\d{0,}"}return e.prototype.convert=function(e){var t=e.toString();return t.length>length&&console.log("Float64AsciiConverter: Value "+t+" has to many characters"),t},e.prototype.convertBack=function(e){var t=e.replace(/[\n\r ]/g,"");if(""===t)return 0;var r=parseFloat(t);return isNaN(r)&&console.log("Float64AsciiConverter: value '"+t+"' is not a number."),r},e.prototype.empty=function(e){return new Float64Array(e)},e}();e.Float64AsciiConverter=a;var o=new t,i=new r,s=new n,u=new a,l={};l[o.pattern]=t,l[i.pattern]=r,l[s.pattern]=n,l[u.pattern]=a,e.AsciiConverters={registeredConverters:l}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(t){var r=function(t){for(var r=e.utils.AsciiConverters,n=Object.keys(r.registeredConverters),a=0,o=void 0,i=void 0;a<n.length;){if(o=n[a],i=new RegExp(o),i.test(t))return new r.registeredConverters[o];a++}return console.log("AsciiConvertManager: No converter registered for "+t)};t.AsciiConvertManager={getConverterFor:r}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(e){var t=function(e,t,r){var n,a,o,i;for(i=new Uint8Array(e),a=new ArrayBuffer(r),o=new Uint8Array(a),n=0;r>n;)o[n]=i[n+t],n++;return a},r=function(){function e(e){this.width=e,this.format="A",this.elementSize=1}return e.prototype.create=function(e,t,r){var n=new Uint8Array(e,t,r);return String.fromCharCode.apply(null,n)},e}();e.CharBinaryConverter=r;var n=function(){function e(e){this.width=e,this.format="I",this.elementSize=2}return e.prototype.create=function(e,r,n){return 0===n?null:new Int16Array(t(e,r,n))},e}();e.Int16BinaryConverter=n;var a=function(){function e(e){this.width=e,this.format="J",this.elementSize=4}return e.prototype.create=function(e,r,n){return 0===n?null:new Int32Array(t(e,r,n))},e}();e.Int32BinaryConverter=a;var o=function(){function e(e){this.width=e,this.format="K",this.elementSize=8}return e.prototype.create=function(e,t,r){console.log("There is no TypedArray for long type")},e}();e.Int64BinaryConverter=o;var i=function(){function e(e){this.width=e,this.format="E",this.elementSize=4}return e.prototype.create=function(e,r,n){return 0===n?null:new Float32Array(t(e,r,n))},e}();e.Float32BinaryConverter=i;var s=function(){function e(e){this.width=e,this.format="D",this.elementSize=8}return e.prototype.create=function(e,r,n){return 0===n?null:new Float64Array(t(e,r,n))},e}();e.Float64BinaryConverter=s;var u={};u.A=function(e){return new r(e)},u.I=function(e){return new n(e)},u.J=function(e){return new a(e)},u.K=function(e){return new o(e)},u.E=function(e){return new i(e)},u.D=function(e){return new s(e)},e.BinaryConverters={registeredConverters:u}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(t){var r=function(t,r){for(var n=e.utils.BinaryConverters,a=Object.keys(n.registeredConverters),o=0;o<a.length;){var i=a[o];if(i===t)return n.registeredConverters[i](r);o++}console.log("BinaryConvertManager: No converter registered for "+t)},n=function(t,r,n,a,o){var i=e.utils.EndianessConverter,s=o.elementSize,u=!0;if(u)var l=new Uint8Array(t);return u&&i.convert(l,s,r,n),o.create(t,r,n)};t.BinaryConvertManager={getConverterFor:r,convertBack:n}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(e){e.Constants={blockLength:2880,lineLength:80,keyLength:8,maxKeywordsInBlock:36}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(e){var t=function(e,t,r){var n=void 0,a=t;for(r+=t;r>a;)n=e[a],e[a]=e[a+1],e[a+1]=n,a+=2},r=function(e,t,r){var n=void 0,a=t;for(r+=t;r>a;)n=e[a],e[a]=e[a+3],e[a+3]=n,n=e[a+1],e[a+1]=e[a+2],e[a+2]=n,a+=4},n=function(e,t,r){var n=void 0,a=t;for(r+=t;r>a;)n=e[a],e[a]=e[a+7],e[a+7]=n,n=e[a+1],e[a+1]=e[a+6],e[a+6]=n,n=e[a+2],e[a+2]=e[a+5],e[a+5]=n,n=e[a+3],e[a+3]=e[a+4],e[a+4]=n,a+=8},a=function(e,t,r,n){for(var a,o,i,s,i=void 0,u=0,l=t/2,f=n/t;f>u;){for(a=0;l>a;)s=r+t*(u+1)-1-a,o=r+t*u+a,i=e[o],e[o]=e[s],e[s]=e[o],a++;u+=t}},o=function(e,o,i,s){switch(null==i&&(i=0),null==s&&(s=e.length),o){case 1:break;case 2:return t(e,i,s);case 4:return r(e,i,s);case 8:return n(e,i,s);default:return a(e,o,i,s)}};e.EndianessConverter={convert:o}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(t){var r=function(t){var r=e.utils.ValueConverters;if(t in r.registeredNames)return r.registeredNames[t];for(var n,a=Object.keys(r.registeredPrefixedNames),o=0;o<a.length;){if(n=a[o],0===t.indexOf(n))return r.registeredPrefixedNames[n];o++}return r.defaultConverter},n=function(t){var r=e.utils.ValueConverters;return t in r.registeredTypes?r.registeredTypes[t]:r.defaultConverter},a=function(e){return"number"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},o=function(e){var t=typeof e;return"number"===t&&(t=a(e)?"int":"float"),("object"===t?e.getMonth:void 0)&&(t="date"),n(t)},i=function(e,t){var n=r(t);return n.convertBack(e)},s=function(e,t){for(var r=0;r<e.length;){if(0===e[r].key.indexOf(t,0))return e[r];r++}return null};t.KeywordsManager={convert:o,convertBack:i,single:s}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(e){var t=function(e){var t,r,n;for(r=-Number.MAX_VALUE,n=Number.MAX_VALUE,t=0;t<e.length;)e[t]>r&&(r=e[t]),e[t]<n&&(n=e[t]),t++;return{min:n,max:r}},r=function(e,t,r){var n,a,o,i;for(i=new Uint8Array(e),a=new ArrayBuffer(r),o=new Uint8Array(a),n=0;r>n;)o[n]=i[n+t],n++;return a};e.Math={minMax:t,subbuffer:r}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(e){var t={Uint8:8,Int16:16,Int32:32,Int64:64,Float32:-32,Float64:-64},r=function(e){return e in t?t[e]:null},n=function(e){var r,n,a;for(r=void 0,n=Object.keys(t),r=0;r<n.length;){if(a=n[r],t[a]===e)return a;r++}return null};e.RegisteredTypes={valueForType:r,typeForValue:n}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(t){var r=function(){function e(){}return e.prototype.convert=function(e){return console.log("StringFitsValueConverter.convert: "+e.toString()),e.replace(/\'/g,"''"),e},e.prototype.convertBack=function(e){return"'"===e.charAt(0)&&(e=e.substr(1)),"'"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e.replace(/\'\'/g,"'").toString().trim()},e}();t.StringConverter=r;var n=function(){function e(){}return e.prototype.convert=function(e){return e.toString()},e.prototype.convertBack=function(e){return parseInt(e)},e}();t.IntConverter=n;var a=function(){function e(){}return e.prototype.convert=function(e){return e.toString()},e.prototype.convertBack=function(e){return parseFloat(e)},e}();t.FloatConverter=a;var o=function(){function e(){}return e.prototype.convert=function(e){return console.log("DateFitsValueConverter.convert not implemented."),""},e.prototype.convertBack=function(e){return"'"===e[0]&&(e=e.slice(1)),"'"===e[e.length-1]&&(e=e.slice(0,e.length-1)),isNaN(Date.parse(e))?(console.log("DateFitsValueConverter.convertBack error parsing "+e),null):new Date(e)},e}();t.DateConverter=o;var i=function(){function e(){}return e.prototype.convert=function(e){return e?"T":"F"},e.prototype.convertBack=function(e){return"T"===e.toString().trim().toUpperCase()},e}();t.BooleanConverter=i;var s=function(){function t(){}return t.prototype.convert=function(t){return e.utils.RegisteredTypes.valueForType(t)},t.prototype.convertBack=function(t){return e.utils.RegisteredTypes.typeForValue(parseInt(t))},t}();t.BitPixConverter=s;var u={BITPIX:new s,NAXIS:new n,NAXIS1:new n,NAXIS2:new n,NAXIS3:new n,YBINNING:new n,XBINNING:new n,PCOUNT:new n,GCOUNT:new n,NSEGMENT:new n,BSCALE:new a,BZERO:new a,EPOCH:new a,EQUINOX:new a,ALTRVAL:new a,ALTRPIX:new a,RESTFREQ:new a,DATAMAX:new a,DATAMIN:new a,RA:new a,DEC:new a,OBSRA:new a,OBSDEC:new a,XSHIFT:new a,YSHIFT:new a,ORBEPOCH:new o,SIMPLE:new i,GROUPS:new i,BLOCKED:new i,EXTEND:new i,SEQVALID:new i,TFIELDS:new n},l={NAXIS:new n,NSEG:new n,DATE:new o,CRVAL:new a,CDELT:new a,CRPIX:new a,CROTA:new a,PHAS:new a,PSCAL:new a,PZERO:new a,SDLT:new a,SRVL:new a,SRPX:new a,DBJD:new a,"THDA-":new a},f={"int":new n,"float":new a,string:new r,date:new o,"boolean":new i},c=new r;t.ValueConverters={registeredNames:u,registeredPrefixedNames:l,registeredTypes:f,defaultConverter:c}}(t=e.utils||(e.utils={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(t){var r;!function(t){var r=function(t,r){for(var n,a=e.utils.KeywordsManager,o=e.utils.Constants,i=e.utils.AsciiConvertManager,s=a.single(r,"NAXIS2").value,u=a.single(r,"NAXIS1").value,l=a.single(r,"TFIELDS").value,f=[],c=[],v=0;v<r.length;)n=r[v],0===n.key.indexOf("TFORM")&&f.push(i.getConverterFor(n.value)),0===n.key.indexOf("TBCOL")&&c.push(n.value-1),v++;c.length!==l&&console.log("There are "+c.length+" 'TBCOL#' keywords whereas 'TFIELDS' specifies "+l),c.push(u);var y=u*s,g=t.subarray(0,y),d=String.fromCharCode.apply(null,g),h=[];for(v=0;v<f.length;)h.push(f[v].empty(s)),v++;for(var E,p,w=0,A=0;s>w;){for(E=d.substr(w*u,u),A=0;l>A;)p=E.substr(c[A],c[A+1]-c[A]),h[A][w]=f[A].convertBack(p),A++;w++}var b=Math.ceil(y/o.blockLength)*o.blockLength-y;return{data:h,bytesRead:y+b}},n=function(e){for(var t,r=0;r<e.length;){if(t=e[r],"XTENSION"===t.key&&"TABLE"===t.value)return!0;r++}return!1};t.asciiTableDataReader={readData:r,canReadData:n}}(r=t.datareaders||(t.datareaders={}))}(t=e.io||(e.io={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(t){var r;!function(t){var r=function(t,r){var n=e.utils.KeywordsManager,a=e.utils.Constants,o=e.utils.BinaryConvertManager,i=n.single(r,"NAXIS2").value,s=n.single(r,"NAXIS1").value,u=(n.single(r,"TFIELDS").value,n.single(r,"THEAP")),l=0;u===!0&&u.value===!0&&(l=u.value);for(var f,c,v,y,g,d,h=0,E=new RegExp("\\d{0,}\\D"),p=[],w=0;w<r.length;)f=r[w],0===f.key.indexOf("TFORM")&&(c=E.exec(f.value),void 0===c[0]&&console.log("error here, bro"),v=1,y=f.value.substr(0,f.value.length-1),""!==y&&(v=parseInt(y)),g=f.value.substr(f.value.length-1,1),1!==g.length&&console.log("formatString too long; "+g.length),d=g.charAt(0),h+=v,p.push(o.getConverterFor(d,v))),w++;var A=p.length,b=[],T=p[0];for(b.push(0),b.push(T.width*i*T.elementSize),w=1;A>w;)T=p[w],b[w+1]=T.width*i*T.elementSize+b[w],w++;var m=s*i,I=t.buffer,S=I.slice(t.byteOffset,t.byteOffset+m),C=[];for(w=0;A>w;)C[w]=o.convertBack(S,b[w],b[w+1]-b[w],i,p[w]),w++;var L=Math.ceil(m/a.blockLength)*a.blockLength-m;return{data:C,bytesRead:m+L}},n=function(e){for(var t,r=0;r<e.length;){if(t=e[r],"XTENSION"===t.key&&("BINTABLE"===t.value||"A3DTABLE"===t.value))return!0;r++}return!1};t.binaryTableDataReader={readData:r,canReadData:n}}(r=t.datareaders||(t.datareaders={}))}(t=e.io||(e.io={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(t){var r;!function(t){var r=function(e,t){switch(e){case"Uint8":return new Uint8Array(t);case"Int8":return new Int8Array(t);case"Int16":return new Int16Array(t);case"Int32":return new Int32Array(t);case"Int64":console.log("There is no TypedArray for "+e);break;case"Float32":return new Float32Array(t);case"Float64":return new Float64Array(t);default:console.log("There is no TypedArray for "+e)}},n=function(t,n){for(var a,o,i,s=e.utils.KeywordsManager,u=e.utils.Constants,l=e.utils.RegisteredTypes,f=e.utils.EndianessConverter,c=e.utils.Math,v=s.single(n,"BITPIX").value,y=Math.abs(l.valueForType(v))/8,g=[],d=0;d<n.length;)a=n[d],o=a.key,i=a.value,0===o.indexOf("NAXIS")&&"NAXIS"!==o&&"NAXIS1"!==o&&1!==i&&g.push(i),d++;var h=s.single(n,"GCOUNT").value,E=s.single(n,"PCOUNT").value,p=1;for(d=0;d<g.length;)p*=g[d],d++;var w,A=E+p,b=h*A,T=b*y,m=t.buffer,I=m.slice(t.byteOffset,t.byteOffset+T),S=!0;S&&(w=new Uint8Array(I));var C=[];d=0;for(var L=void 0,B=void 0;h>d;)L=d*A*y,B=E*y,S&&f.convert(w,y,L,B),C.push(r(v,c.subbuffer(I,L,B))),L+=B,B=p*y,S&&f.convert(w,y,L,B),C.push(r(v,c.subbuffer(I,L,B))),d++;var N=Math.ceil(T/u.blockLength)*u.blockLength-T;return{data:C,bytesRead:T+N}},a=function(e){for(var t,r=!1,n=!1,a=0;a<e.length;){if(t=e[a],"GROUPS"===t.key&&t.value===!0&&(r=!0),"NAXIS1"===t.key&&0===t.value&&(n=!0),r&&n)return!0;a++}return!1};t.randomGroupsDataReader={readData:n,canReadData:a}}(r=t.datareaders||(t.datareaders={}))}(t=e.io||(e.io={}))}(slimfits||(slimfits={}));var slimfits;!function(e){var t;!function(t){var r;!function(t){var r=function(t,r,n){var a,o,i=(e.utils.KeywordsManager,e.utils.Constants),s=e.utils.RegisteredTypes,u=e.utils.EndianessConverter,l=Math.abs(s.valueForType(r))/8,f=n.reduce(function(e,t){return e*t},1),c=f*l,v=!0,y=t.buffer,g=y.slice(t.byteOffset,t.byteOffset+c),d=r;switch(v&&(o=new Uint8Array(g)),r){case"Uint8":a=new Uint8Array(g);break;case"Int16":a=new Int16Array(g),v&&u.convert(o,2);break;case"Int32":a=new Int32Array(g),v&&u.convert(o,4);break;case"Float32":a=new Float32Array(g),v&&u.convert(o,4);break;case"Float64":a=new Float64Array(g),v&&u.convert(o,8);break;default:console.log("Type "+r+" unrecognized")}var h=Math.ceil(c/i.blockLength)*i.blockLength-c;return{data:[a],bytesRead:c+h,actualType:d}},n=function(t,r,n,a,o){var i,s,u=(e.utils.KeywordsManager,e.utils.Constants),l=e.utils.RegisteredTypes,f=e.utils.EndianessConverter,c=Math.abs(l.valueForType(r))/8,v=o.reduce(function(e,t){return e*t},1),y=v*c,g=!0,d=t.buffer,h=d.slice(t.byteOffset,t.byteOffset+y),E=r;switch(g&&(s=new Uint8Array(h)),r){case"Uint8":i=new Uint8Array(h);break;case"Int16":g&&f.convert(s,Int16Array.BYTES_PER_ELEMENT);for(var p=!1,w=new DataView(h),A=new ArrayBuffer(h.byteLength),b=new DataView(A),T=w.byteLength/Int16Array.BYTES_PER_ELEMENT,m=0;T>m;m++){var I=w.getInt16(m*Int16Array.BYTES_PER_ELEMENT,!0)*n+a;if(I>32767){p=!0;break}b.setInt16(m*Int16Array.BYTES_PER_ELEMENT,I,!0)}if(p){E="Uint16";for(var T=w.byteLength/Uint16Array.BYTES_PER_ELEMENT,S=0;T>S;S++){var I=w.getInt16(S*Int16Array.BYTES_PER_ELEMENT,!0)*n+a;0>I&&console.log("Error: value cannot be less than zero for 'Uint' type"),b.setUint16(S*Uint16Array.BYTES_PER_ELEMENT,I,!0)}}i=p?new Uint16Array(A):new Int16Array(A);break;case"Int32":g&&f.convert(s,Int32Array.BYTES_PER_ELEMENT);for(var C=!1,w=new DataView(h),A=new ArrayBuffer(h.byteLength),b=new DataView(A),T=w.byteLength/Int32Array.BYTES_PER_ELEMENT,m=0;T>m;m++){var I=w.getInt32(m*Int32Array.BYTES_PER_ELEMENT,!0)*n+a;if(I>2147483647){C=!0;break}w.setInt32(m*Int32Array.BYTES_PER_ELEMENT,I,!0)}if(C){E="Uint32";for(var T=w.byteLength/Uint16Array.BYTES_PER_ELEMENT,S=0;T>S;S++){var I=w.getInt32(m*Int32Array.BYTES_PER_ELEMENT,!0)*n+a;0>I&&console.log("Error: value cannot be less than zero for 'Uint' type"),b.setUint32(S*Uint32Array.BYTES_PER_ELEMENT,I,!0)}}i=C?new Uint32Array(A):new Int32Array(A),i=new Int32Array(h);break;case"Float32":g&&f.convert(s,Float32Array.BYTES_PER_ELEMENT);for(var w=new DataView(h),T=w.byteLength/Float32Array.BYTES_PER_ELEMENT,m=0;T>m;m++)w.setFloat32(m*Float32Array.BYTES_PER_ELEMENT,w.getFloat32(m*Float32Array.BYTES_PER_ELEMENT,!1)*n+a,!1);i=new Float32Array(h);break;case"Float64":g&&f.convert(s,Float64Array.BYTES_PER_ELEMENT);for(var w=new DataView(h),T=w.byteLength/Float64Array.BYTES_PER_ELEMENT,m=0;T>m;m++)w.setFloat64(m*Float64Array.BYTES_PER_ELEMENT,w.getFloat64(m*Float64Array.BYTES_PER_ELEMENT,!1)*n+a,!1);i=new Float64Array(h);break;default:console.log("Type "+r+" unrecognized")}var L=Math.ceil(y/u.blockLength)*u.blockLength-y;return{data:[i],bytesRead:y+L,actualType:E}},a=function(t,a){for(var o,i,s,u=e.utils.KeywordsManager,l=u.single(a,"BITPIX").value,f=[],c=0,v=!1;c<a.length;)s=a[c].key,0===s.indexOf("NAXIS",0)&&"NAXIS"!==s&&(f.push(a[c].value),0===a[c].value&&(v=!0)),c++;var y=u.single(a,"BSCALE");o=void 0===y||null===y?1:y.value;var g=u.single(a,"BZERO");return i=void 0===g||null===g?0:g.value,f.length>0&&!v?1!==o||0!==i?n(t,l,o,i,f):r(t,l,f):{data:null,bytesRead:0}},o=function(e){for(var t=0;t<e.length;){if("SIMPLE"===e[t].key&&e[t].value===!0)return!0;if("XTENSION"===e[t].key&&"IMAGE"===e[t].value)return!0;t++}return!1};t.simpleDataReader={readData:a,canReadData:o}}(r=t.datareaders||(t.datareaders={}))}(t=e.io||(e.io={}))}(slimfits||(slimfits={}));